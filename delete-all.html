<!DOCTYPE html>
<html>
<head>
	<title>Delete All Items</title>
</head>
<body>
	<h1>Delete All Compositions and Progressions</h1>
	<p>Click the button below to delete all items. This cannot be undone!</p>
	<button onclick="deleteAll()" style="padding: 10px 20px; font-size: 16px; background: red; color: white; border: none; cursor: pointer;">Delete All Items</button>
	<div id="result" style="margin-top: 20px;"></div>
	
	<script type="module">
		async function deleteAll() {
			const resultDiv = document.getElementById('result')
			resultDiv.innerHTML = 'Deleting... Please wait.'
			
			try {
				// Import the functions
				const { deleteAllCompositions } = await import('./src/lib/compositionService.ts')
				const { deleteAllProgressions } = await import('./src/lib/progressionService.ts')
				
				// Delete all compositions
				const compsDeleted = await deleteAllCompositions()
				
				// Delete all progressions
				const progsDeleted = await deleteAllProgressions()
				
				resultDiv.innerHTML = `✅ Deleted ${compsDeleted} compositions and ${progsDeleted} progressions.<br>Please reload the app.`
				
				// Also clear sessionStorage sync flags
				sessionStorage.clear()
				
				setTimeout(() => {
					window.location.href = '/'
				}, 2000)
			} catch (error) {
				resultDiv.innerHTML = `❌ Error: ${error.message}<br>Check console for details.`
				console.error('Error deleting all items:', error)
			}
		}
		
		window.deleteAll = deleteAll
	</script>
</body>
</html>
